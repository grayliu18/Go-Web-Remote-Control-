# Go Web Remote Control (网页键鼠遥控器)

**声明：本项目完全由 AI (Cline) 根据用户需求生成。**

[![Go Version](https://img.shields.io/badge/Go-1.18%2B-blue.svg)](https://golang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) <!-- 假设使用 MIT 协议 -->

一个简单的跨平台应用程序，让您可以在局域网内，把手机或其他设备的网页浏览器变成电脑的无线鼠标和键盘。

## ✨ 功能特性

**服务端 (Go):**
*   ✅ **跨平台基础:** 使用 Go 编写，核心控制逻辑可在 Windows, macOS, Linux 运行 (部分功能如开机自启、关机命令可能存在系统差异)。
*   🚀 **单文件部署:** 将前端 HTML/CSS/JS 直接嵌入到 Go 可执行文件中，方便分发和使用。
*   🔗 **WebSocket 通信:** 实现低延迟的实时控制。
*   🖱️ **鼠标模拟:** 支持移动、左键单击/双击、右键单击、滚轮滚动、按住左键拖拽。
*   ⌨️ **键盘模拟:** 支持单个按键、组合键 (如 Ctrl+C, Shift+A)、直接输入文本。
*   🖥️ **远程关机:** 提供远程关闭计算机的功能 (Windows 实现最完整)。
*   ⚙️ **系统托盘图标:**
    *   自动检测并列出本机所有可用局域网 IP 地址 (优先显示 `192.168.x.x`)。
    *   允许用户在托盘菜单中选择用于访问的 IP 地址。
    *   提供 **开机自启** 选项 (仅限 Windows)。
    *   提供 **退出** 应用程序的选项。
*   🔔 **桌面通知:** 在程序启动、客户端连接、发生错误时弹出桌面通知。
*   🔍 **网络自检:** 程序启动时尝试连接自身 IP（主要用于帮助用户初步判断是否由电脑防火墙阻止了连接）。
*   ✨ **光标修复 (Windows):** 包含特殊逻辑，在 Windows 上周期性强制显示鼠标光标，解决某些情况下光标自动隐藏的问题。
*   🔧 **状态清理:** 客户端意外断开时，服务器会尝试释放可能被按下的鼠标按键（如拖拽锁定状态），防止鼠标状态卡死。
*   🔒 **优雅退出:** 确保在退出时正确关闭服务器。

**前端 (Web 界面):**
*   📱 **移动端优先:** 响应式设计，优化触屏操作体验。
*    **虚拟触摸板:**
    *   单指滑动控制鼠标移动。
    *   双指滑动控制页面滚动。
    *   单击触摸板实现鼠标左键单击。
    *   快速双击触摸板实现鼠标左键双击。
*   🔘 **鼠标按钮:** 提供独立的左键、右键和 **左键拖拽锁定** 按钮。
*   📝 **文本输入:** 提供输入框，可将输入的文本发送到电脑上模拟打字。
*   ⚡ **快捷键:** 提供常用功能键按钮 (如 ESC, Tab, Backspace, Enter, 方向键, Delete)。
*   🎹 **全功能虚拟键盘 (可切换):**
    *   包含 F1-F12 功能键。
    *   标准 QWERTY 布局，包含数字和符号。
    *   支持 **粘滞模式** 的 Ctrl, Alt, Shift, Win (Windows/Cmd) 修饰键（按下按钮即切换激活/非激活状态）。
    *   支持 **Caps Lock** 状态切换，并实时更新虚拟键盘上字母的大小写显示。
    *   提供隐藏键盘的按钮。
*   💨 **速度调节:** 可通过滑块实时调整鼠标移动灵敏度，设置会自动保存在浏览器本地存储 (localStorage) 中，下次访问时保留。
*   📐 **布局切换:** 提供按钮以适应横屏或竖屏操作模式。
*   🔴 **远程关机:** 提供显眼的关机按钮（带二次确认）。
*   🚦 **连接状态:** 实时显示与后端的 WebSocket 连接状态，并在断开时自动尝试重连。

## 🚀 使用方法

1.  **运行程序:**
    *   下载适用于您操作系统的 `go_remote_control.exe` (或其他平台编译版本)。
    *   直接双击运行该可执行文件。程序将在后台运行，并在系统托盘区域（任务栏右下角）显示一个图标。
2.  **查找访问地址:**
    *   程序启动时会在命令行窗口 (如果可见) 或通过系统托盘图标提示可用的访问地址。
    *   通常是一个类似 `http://192.168.x.x:61336` 的地址。
    *   **重要:** 确保您的手机/平板电脑与运行程序的电脑连接在 **同一个局域网/WiFi** 下。
    *   如果程序检测到多个 IP 地址，您可以通过 **右键单击托盘图标** 来查看并选择其他可尝试的 IP 地址。
3.  **访问控制界面:**
    *   在手机/平板电脑的浏览器中打开上一步获取的地址。
    *   您应该能看到远程控制界面。
4.  **开始控制:**
    *   使用触摸板、按钮和键盘进行远程操作。
    *   通过 **右键单击托盘图标** 可以设置开机自启 (仅 Windows) 或退出程序。

## ⚠️ 注意事项

*   **权限问题:** 如果本程序以普通用户权限运行，可能无法控制以管理员权限运行的窗口（例如：任务管理器、某些安全软件的界面）。如需控制这些窗口，请尝试以管理员权限运行 `go_remote_control.exe`。

## 🛠️ 从源码构建 (可选)

如果您想自行修改或编译：

1.  确保您已安装 Go (建议 1.18 或更高版本)。
2.  克隆本仓库 (或下载源码)。
3.  安装必要的依赖 (主要是 `robotgo`, `systray`, `beeep` 等，`go.mod` 文件已包含)。
    ```bash
    go mod tidy
    ```
4.  构建应用程序。对于 Windows，可能需要额外处理资源嵌入 (如 `rsrc` 工具用于图标和清单)：
    ```bash
    # 编译 (示例)
    go build -ldflags="-H windowsgui" -o go_remote_control.exe
    ```
    *   `-H windowsgui` 参数可以在 Windows 下运行时隐藏命令行窗口。
    *   macOS 和 Linux 的编译命令可能略有不同，且 `systray` 和 `robotgo` 在这些平台可能有额外的系统依赖库需要安装。请参考相应库的文档。

5.  **使用 UPX 压缩 (可选):**
    如果您希望减小可执行文件的大小，可以使用 [UPX (Ultimate Packer for eXecutables)](https://upx.github.io/) 进行压缩。UPX 是一个免费、开源的可执行文件压缩工具。
    ```bash
    # 假设您已经安装了 UPX 并将其添加到了系统 PATH
    upx --best --lzma go_remote_control.exe
    ```
    *   `--best` 表示使用最佳压缩率。
    *   `--lzma` 通常能提供更好的压缩效果。
    *   压缩后的文件功能不变，但体积会显著减小。

## 📦 依赖项

*   [Go](https://golang.org/)
*   [github.com/gorilla/websocket](https://github.com/gorilla/websocket) - WebSocket 实现
*   [github.com/go-vgo/robotgo](https://github.com/go-vgo/robotgo) - 核心键鼠模拟库
*   [github.com/getlantern/systray](https://github.com/getlantern/systray) - 系统托盘图标库
*   [github.com/gen2brain/beeep](https://github.com/gen2brain/beeep) - 跨平台桌面通知库
*   [golang.org/x/sys/windows/registry](https://pkg.go.dev/golang.org/x/sys/windows/registry) - Windows 注册表操作 (用于开机自启)

## 平台支持

*   **Windows:** 功能最完整，包括开机自启。
*   **macOS:** 核心控制功能应可工作，但 `systray` 和 `robotgo` 可能需要额外配置或依赖。开机自启功能未实现。关机命令可能需要权限。
*   **Linux:** 核心控制功能应可工作，但 `systray` 和 `robotgo` 可能需要额外配置或依赖 (如 X11 相关库)。开机自启功能未实现。关机命令通常需要 root 权限。

## 🤝 贡献

欢迎提出 Issue 或 Pull Request。由于本项目由 AI 生成，可能存在未预料到的问题或可以改进的地方。

## 📄 许可证

本项目采用 [MIT 许可证](LICENSE)。 <!-- 确保项目中包含一个名为 LICENSE 的文件，内容为 MIT 协议文本 -->
